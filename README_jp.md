# メインフレームデータ生成ツール (Mainframe Data Generator Tool)

## 概要
本ツールは、メインフレームシステム向けのテストデータを生成するために設計されたC言語ベースのコマンドラインユーティリティです。固定長および可変長レコード、EBCDIC互換構造（バイナリモードによる）、およびレコード記述語（RDW）のような特定のレイアウト制御など、メインフレーム環境に適した様々な特性を持つファイルの作成をサポートします。

生成パラメータを含む定義ファイルを読み込み、生成されたデータを含む出力ファイルを作成します。

## 使い方
```bash
./generator -d <definition_file> -o <output_file>
```

- `-d <definition_file>`: データ特性を定義した設定ファイルへのパス。
- `-o <output_file>`: 生成されたデータが保存されるパス。

## パラメータ仕様
定義ファイルは `KEY=VALUE` のペアからなるテキストファイルです。`#` で始まる行はコメントとして扱われます。

| キー (Key) | 値 (Values) | 説明 (Description) |
| :--- | :--- | :--- |
| `FILE_TYPE` | `FIXED` | 固定長レコード。 |
| | `VARIABLE` | 可変長レコード（最大 `RECORD_LENGTH` までのランダムな長さ）。 |
| `RECORD_LENGTH` | *整数* | レコード（データペイロード）の最大バイト長。 |
| `DATA_MODE` | `TEXT` | テキストデータを生成します。スペースでパディングされます。 |
| | `BINARY` | バイナリデータを生成します。ヌル文字 (0x00) でパディングされます。 |
| `NEWLINE` | `LF`, `CRLF`, `CR` | 各レコードの後に改行文字を追加します（主に FIXED/TEXT モード用）。 |
| | `NONE` | 改行区切りなし。 |
| `RECORD_COUNT` | *整数* | 生成するレコード数。 |
| `RDW_ENDIAN` | `BIG` | ビッグエンディアン RDW（メインフレーム標準）。 |
| | `LITTLE` | リトルエンディアン RDW。 |
| `FILL_PATTERN` | `RANDOM` | `DATA_MODE` と `TEXT_TYPE` に基づくランダムな内容。 |
| | `0xHH` | 特定の16進数バイトで埋めます（例: `0x00`, `0xFF`）。 |
| | *文字列* | 特定のループする文字列で埋めます（例: `ABC`）。 |
| `TEXT_TYPE` | `ASCII` | ランダムな表示可能ASCII文字。 |
| | `SJIS` | ランダムなShift-JIS文字（2バイトの漢字/ひらがな/カタカナを含む）。 |
| | `ISO_2022` | ランダムなISO-2022-JP文字。 |

## 出力仕様

### 固定長 (`FILE_TYPE=FIXED`)
レコードは一定のサイズで順次書き込まれます。
- **構造**: `[データ]` の後に `[改行]`（設定されている場合）。
- **サイズ**: `RECORD_LENGTH` (+ 改行サイズ)。

### 可変長 (`FILE_TYPE=VARIABLE`)
レコードはデータの前に4バイトのレコード記述語（RDW）が付加されて書き込まれます。
- **構造**: `[RDW][データ]`
- **RDW フォーマット**: 4バイト。 `LL LL 00 00`
    - `LL LL`: レコード総長（データ + RDW用の4バイト）を表す16ビット整数。
    - エンディアンは `RDW_ENDIAN` で制御されます。
- **データサイズ**: 1 から `RECORD_LENGTH` の間でランダムに選択されます。
- **注意**: 通常のテキストファイルとは異なり、テキスト解析を特にテストしない限り、厳密なメインフレームシミュレーションでは `NEWLINE` は `NONE` にすべきです。

### 埋め込みパターン (Fill Patterns)
- **ランダム ASCII**: 0x20 から 0x7E までの表示可能文字。
- **ランダム日本語**: ASCIIと混在した有効なShift-JIS 2バイト文字（ひらがな、カタカナ、漢字第1水準）。
- **Hex埋め**: レコード全体を指定されたバイトで埋めます。
- **文字列パターン**: 文字列を繰り返してレコード長を埋めます。
